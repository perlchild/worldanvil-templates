{% import _self as sheet %}
{# --- calculate level --- #}
{% set level = 0 %}
{% if variables.level_1 is defined and variables.level_1 != '' %}{% set level = level + variables.level_1 %}{% endif %}
{% if variables.level_2 is defined and variables.level_2 != '' %}{% set level = level + variables.level_2 %}{% endif %}
{% if variables.level_3 is defined and variables.level_3 != '' %}{% set level = level + variables.level_3 %}{% endif %}
{% if variables.level_4 is defined and variables.level_4 != '' %}{% set level = level + variables.level_4 %}{% endif %}
{% if level < 1 %}{% set level = 1 %}{% endif %}
{# --- INITIATIVE --- #}
{% set ini_dex = ((variables.dexterity|default('10') - 10) / 2)|round(0, 'floor') %}
{% set ini_mod = variables.initiative_mod|default('0') %}
{% set ini = variables.initiative|default('') %}
{% if ini != "" %}
    {% set ini_mod = ini - ini_dex %}
    {% set ini = "" %}
{% endif %}
{# --- AC --- #}
{% set ac = 10 + ((variables.dexterity|default('10') - 10) / 2)|round(0, 'floor') %}
{% if ac == -5 %}{% set ac = '' %}{% endif %}
{% if variables.armor_class is defined and variables.armor_class != '' %}{% set ac = variables.armor_class %}{% endif %}
{# --- HIT POINTS --- #}
{% set chp = variables.hit_points_current|default('') %}
{% if variables.hit_points is defined and variables.hit_points != '' %}
	{# if the player/dm has entered hitpoints, use them #}
	{% set hp = variables.hit_points %}
    {% if chp == '' %}{% set chp = hp %}{% endif %}
{% else %}
	{# if the hp field is empty, automatically calculate them #}
	{% set cb = ((variables.constitution|default('10') - 10) / 2)|round(0, 'floor') %}
	{% set hp = cb + variables.hit_die|default('8') %}
	{% if level > 1 %}
		{% for i in 2..level %}
			{% set die = variables.hit_die|default('8') / 2 %}
			{% set die = die|round(0, 'ceil') %}
			{% set hp = hp + cb + die %}
		{% endfor %}
	{% endif %}
{% endif %}
{# --- PROF BONUS + XP required for next level --- #}
{% set xpreq = 0 %}
{% set l = level %}
{% set pb = 1 + l / 4 %}
{% set pb = pb|round(0, 'ceil') %}
{% if     l ==  1 %}{% set xpreq = 300 %}
{% elseif l ==  2 %}{% set xpreq = 900 %}
{% elseif l ==  3 %}{% set xpreq = 2700 %}
{% elseif l ==  4 %}{% set xpreq = 6500 %}
{% elseif l ==  5 %}{% set xpreq = 14000 %}
{% elseif l ==  6 %}{% set xpreq = 23000 %}
{% elseif l ==  7 %}{% set xpreq = 34000 %}
{% elseif l ==  8 %}{% set xpreq = 48000 %}
{% elseif l ==  9 %}{% set xpreq = 64000 %}
{% elseif l == 10 %}{% set xpreq = 85000 %}
{% elseif l == 11 %}{% set xpreq = 100000 %}
{% elseif l == 12 %}{% set xpreq = 120000 %}
{% elseif l == 13 %}{% set xpreq = 140000 %}
{% elseif l == 14 %}{% set xpreq = 165000 %}
{% elseif l == 15 %}{% set xpreq = 195000 %}
{% elseif l == 16 %}{% set xpreq = 225000 %}
{% elseif l == 17 %}{% set xpreq = 265000 %}
{% elseif l == 18 %}{% set xpreq = 305000 %}
{% elseif l == 19 %}{% set xpreq = 355000 %}
{% elseif l == 20 %}{% set xpreq = 355000 %}
{% elseif l == 21 %}{% set xpreq = 385000 %}
{% elseif l == 22 %}{% set xpreq = 415000 %}
{% elseif l == 23 %}{% set xpreq = 445000 %}
{% elseif l == 24 %}{% set xpreq = 475000 %}
{% elseif l == 25 %}{% set xpreq = 505000 %}
{% elseif l == 26 %}{% set xpreq = 535000 %}
{% elseif l == 27 %}{% set xpreq = 565000 %}
{% elseif l == 28 %}{% set xpreq = 595000 %}
{% elseif l == 29 %}{% set xpreq = 625000 %}
{% elseif l == 30 %}{% set xpreq = 655000 %}
{% endif %}
{# ---------------------------------------------- #}
{% macro addSign( attr, roll = 'y', pbd = '' ) %}
{% if pbd != '' %}
	{% set result = attr %}
	{% if result != '' %}{% set result = result|replace({'+0': ""}) %}{% endif %}
{% else %}
	{% if attr > 0 %} {% set result = '+' ~ attr %} {% elseif attr == '' or attr == 0 %} {% set result = '+0' %}{% else %} {% set result =  attr %} {% endif %}
{% endif %}
{% set rc = '+' ~ result %}{% set rc = rc|replace({'++': "+", '+-': "-"}) %}
{% if result != '' %}{% set result = result|replace({'++': "+", '+-': "-"}) %}{% endif %}
{% if roll == 'y' %}[roll:1d20{{ rc }}|{{ result }}]{% else %}{{ result }}{% endif %}
{% endmacro addSign %}
{# ---------------------------------------------- #}
{% macro getMod(attr, add = '', pbd = '') %}
{% set mod = 0 %}
{% if attr is defined and attr != '' %}
	{% set mod = (attr - 10) / 2 %}
	{% set mod = mod|round(0, 'floor') %}
{% endif %}
{% if pbd != '' %}
	{% if add is defined and add != '' %}
		{% if mod > -1 %}{% set mod = '+' ~ mod %}{% endif %}
		{% set mod = mod ~ '+' ~ add %}
	{% endif %}
{% else %}
	{% if add is defined and add != '' %}
		{% set mod = mod + add %}
	{% endif %}
	{% if mod > -1 %}{% set mod = '+' ~ mod %}{% endif %}
{% endif %}
{{mod}}{% endmacro getMod %}
{# ---------------------------------------------- #}
{% macro attack(id, prof, name, attr, mod, dmg, dmgt, props) %}
<tr>{% set eo = "od" %}{% if id is even %}{% set eo = "ev" %}{% endif %}
{% set attr = attr|lower %}
	<td class="{{eo}}"><input value="1" {% if prof is defined and prof == 1 %} checked="checked"{% endif %} id="attack_prof_{{id}}" name="attack_prof_{{id}}" type="checkbox" /></td>
	<td class="{{eo}}"><input value="{{ name }}" class="form-control" id="attack_{{id}}" name="attack_{{id}}" placeholder="eg Crossbow, Dagger" type="text" /></td>
	<td class="{{eo}}"><select class="form-control" id="attack_attr_{{id}}" name="attack_attr_{{id}}">
        <option value="strength" {% if attr is defined and attr == "strength" %}selected="selected" {% endif %} >STR</option>
        <option value="dexterity" {% if attr is defined and attr == "dexterity" %}selected="selected" {% endif %} >DEX</option>
        <option value="constitution" {% if attr is defined and attr == "constitution" %}selected="selected" {% endif %} >CON</option>
        <option value="intelligence" {% if attr is defined and attr == "intelligence" %}selected="selected" {% endif %} >INT</option>
        <option value="wisdom" {% if attr is defined and attr == "wisdom" %}selected="selected" {% endif %} >WIS</option>
        <option value="charismna" {% if attr is defined and attr == "charisma" %}selected="selected" {% endif %} >CHA</option>
    </select></td>
	<td class="{{eo}}" title="Attack Modfier, eg. +1 for a magical item"><input value="{{ mod }}" class="form-control" id="attack_mod_{{id}}" name="attack_mod_{{id}}" placeholder="eg +1" type="text" /></td>
	<td class="{{eo}}" title="Base Damage without STR/DEX modifier"><input value="{{ dmg }}" class="form-control" id="attack_dmg_{{id}}" name="attack_dmg_{{id}}" placeholder="eg 2d6" type="text" /></td>
	<td class="{{eo}}"><input value="{{ dmgt }}" class="form-control" id="attack_dmg_type_{{id}}" name="attack_dmg_type_{{id}}" placeholder="eg piercing" type="text" /></td>
</tr>
<tr><th colspan=2 class="{{eo}} r">Properties</th><td colspan=4 class="{{eo}}"><input value="{{ props }}" class="form-control" id="attack_props_{{id}}" name="attack_props_{{id}}" placeholder="eg Finesse, light, thrown (range 20/60)" type="text" /></td></tr>
{% endmacro attack %}
{# ---------------------------------------------- #}
{% macro attSelect(name = "", attr = "", default = "STR") %}
{% if attr == "" %}{% set attr = default %}{% endif %}{% set attr = attr|lower %}
<select class="form-control" id="{{name}}" name="{{name}}">
    <option value="strength" {% if attr is defined and attr == "strength" %}selected="selected" {% endif %} >STR</option>
    <option value="dexterity" {% if attr is defined and attr == "dexterity" %}selected="selected" {% endif %} >DEX</option>
    <option value="constitution" {% if attr is defined and attr == "constitution" %}selected="selected" {% endif %} >CON</option>
    <option value="intelligence" {% if attr is defined and attr == "intelligence" %}selected="selected" {% endif %} >INT</option>
    <option value="wisdom" {% if attr is defined and attr == "wisdom" %}selected="selected" {% endif %} >WIS</option>
    <option value="charisma" {% if attr is defined and attr == "charisma" %}selected="selected" {% endif %} >CHA</option>
</select>
{% endmacro attSelect %}
{# ---------------------------------------------- #}
{% macro spell(id, spell_level = '', spell_name = '', spell_id = '', spell_ability = '', spell_prepared = 0, spell_casting_time = '', spell_range = '', spell_duration = '', spell_damage = '', spell_damage_scm = '', spell_damage_higher = '', spell_components = '', spell_component_sets = '', spell_notes = '') %}
<tr>{% set eo = "od" %}{% if id is even %}{% set eo = "ev" %}{% endif %}{% set spell_ability = spell_ability|lower %}
    <td class="{{eo}}" title="Spell is prepared">
        <input value="1" {% if spell_prepared == 1 %} checked="checked"{% endif %} id="spell_prepared_{{id}}" name="spell_prepared_{{id}}" type="checkbox" />
    </td>
    <td class="{{eo}}" title="(C)antrip or level of the spell (1-9)">
        <input value="{{ spell_level }}" class="form-control c" id="spell_level_{{id}}" name="spell_level_{{id}}" type="text" />
    </td>
    <td class="{{eo}}" title="Name of the spell">
        <input value="{{ spell_name }}" class="form-control" id="spell_name_{{id}}" name="spell_name_{{id}}" placeholder="eg Fireball" type="text" />
    </td>
    <td class="{{eo}}" title="WA stat block ID of the spell">
        <input value="{{ spell_id }}" class="form-control c" id="spell_id_{{id}}" name="spell_id_{{id}}" type="text" />
    </td>
    <td class="{{eo}}" title="Spellcasting ability">
        <select class="form-control" id="spell_ability_{{id}}" name="spell_ability_{{id}}">
            <option value="none" {% if spell_ability[:3]|upper == "NON" %}selected="selected" {% endif %} >NONE</option>
            <option value="intelligence" {% if spell_ability[:3]|upper == "INT" %}selected="selected" {% endif %} >INT</option>
            <option value="wisdom" {% if spell_ability[:3]|upper == "WIS" %}selected="selected" {% endif %} >WIS</option>
            <option value="charisma" {% if spell_ability[:3]|upper == "CHA" %}selected="selected" {% endif %} >CHA</option>
        </select>
    </td>
    <td class="{{eo}}" title="Casting time">
        <input value="{{ spell_casting_time }}" class="form-control c" id="spell_casting_time_{{id}}" name="spell_casting_time_{{id}}" placeholder="eg 1 round" type="text" />
    </td>
    <td class="{{eo}}" title="Range of the spell (touch, 6ft, ...)">
        <input value="{{ spell_range }}" class="form-control c" id="spell_range_{{id}}" name="spell_range_{{id}}" placeholder="eg 60 ft" type="text" />
    </td>
    <td class="{{eo}}" title="Duration of the spell">
        <input value="{{ spell_duration }}" class="form-control c" id="spell_duration_{{id}}" name="spell_duration_{{id}}" placeholder="eg Concentration" type="text" />
    </td>
    <td class="{{eo}}" title="Damage or healing power (rollable)">
        <input value="{{ spell_damage }}" class="form-control c" id="spell_damage_{{id}}" name="spell_damage_{{id}}" placeholder="eg 2d6" type="text" />
    </td>
    <td class="{{eo}}" title="Check to add spellcasting modifier to damage/heal output">
        <input value="1" {% if spell_damage_scm == 1 %} checked="checked"{% endif %} id="spell_damage_scm_{{id}}" name="spell_damage_scm_{{id}}" type="checkbox" />
    </td>
    <td class="{{eo}}" title="Damage or healing power on higher levels (rollable), add anything here to make the spell show up for higher levels!">
        <input value="{{ spell_damage_higher }}" class="form-control c" id="spell_damage_higher_{{id}}" name="spell_damage_higher_{{id}}" placeholder="eg 1d6" type="text" />
    </td>
    <td class="{{eo}}" title="Required components: (v)erbal, (s)omatic, (m)aterial">
        <input value="{{ spell_components }}" class="form-control c" id="spell_components_{{id}}" name="spell_components_{{id}}" placeholder="eg VSM" type="text" />
    </td>
    <td class="{{eo}}" title="Components for how many casts you have available">
        <input value="{{ spell_component_sets }}" class="form-control c" id="spell_component_sets_{{id}}" name="spell_component_sets_{{id}}" placeholder="eg 3" type="text" />
    </td>
</tr>
<tr><th class="{{eo}}">&nbsp;</th><th class="{{eo}} c">#{{id}}</th><td class="{{eo}} r">Notes:</th><td colspan=10 class="{{eo}}">
    <input value="{{ spell_notes }}" class="form-control" id="spell_notes_{{id}}" name="spell_notes_{{id}}" type="text" />
</td></tr>
{% endmacro spell %}
{# --- sheet -- #}
<div class="dnd5e-sheet">
    <!-- Header -->
    <div class="row top-row" id="dnd5e-top-content">
        <div class="col-12 col-md-6">
            <div class="col-12 col-md-12">
                <div class="form-group">
                    <label for="name">Character Name</label>
                    <input class="form-control" type="text" value="{{ variables.name is defined ? variables.name }}" name="name" required="required" />
                    <label for="imageid">Portrait or Crest (WA ImageID)</label>
                    <input class="form-control" type="number" value="{{ variables.imageid is defined ? variables.imageid }}" name="imageid" />
                    <label for="background">Background</label>
                    <input class="form-control" type="text" value="{{ variables.background is defined ? variables.background }}" name="background" />
                    <label for="race">Race</label>
                    <input class="form-control" type="text" value="{{ variables.race is defined ? variables.race }}" name="race" />
                    <label for="alignment">Alignment</label>
                    <input class="form-control" type="text" value="{{ variables.alignment is defined ? variables.alignment }}" name="alignment" />
                    <label for="xp">Experience Points (XP) - next level: {{xpreq}}</label>
                    <input class="form-control in-md" type="string" value="{{ variables.xp is defined ? variables.xp }}" name="xp" />
                </div>  
            </div>
        </div>
        <div class="col-12 col-md-6">
            <div class="row">
                <div class="col-12 col-md-6">
                    <div class="form-group dnd-sheet-container">
                        <label for="class_1">Class 1</label>
                        <input class="form-control" type="text" value="{{ variables.class_1 is defined ? variables.class_1 }}" placeholder="eg Bard, Fighter or Cleric" name="class_1" />
                        <label for="level_1">Level</label>
                        <input class="form-control" type="number" value="{{ variables.level_1 is defined ? variables.level_1 }}" name="level_1" />
                        <label for="hit_die" title="Hit Die Type, e.g. 8 for a d8">Hit Die Type</label>
                        <input class="form-control" type="number" placeholder="eg 8 for 1d8" value="{{ variables.hit_die is defined ? variables.hit_die }}" name="hit_die" />
                    </div>
                    <div class="form-group dnd-sheet-container">
                        <label for="class_2">Class 2</label>
                        <input class="form-control" type="text" value="{{ variables.class_2 is defined ? variables.class_2 }}" placeholder="eg Bard, Fighter or Cleric" name="class_2" />
                        <label for="level_2">Level</label>
                        <input class="form-control" type="number" value="{{ variables.level_2 is defined ? variables.level_2 }}" name="level_2" />
                        <label for="hit_die_2" title="Hit Die Type, e.g. 8 for a d8">Hit Die Type</label>
                        <input class="form-control" type="number" placeholder="eg 8 for 1d8" value="{{ variables.hit_die_2 is defined ? variables.hit_die_2 }}" name="hit_die_2" />
                    </div>
                </div>
                <div class="col-12 col-md-6">
                    <div class="form-group dnd-sheet-container">
                        <label for="class_3">Class 3</label>
                        <input class="form-control" type="text" value="{{ variables.class_3 is defined ? variables.class_3 }}" placeholder="eg Bard, Fighter or Cleric" name="class_3" />
                        <label for="level_3">Level</label>
                        <input class="form-control" type="number" value="{{ variables.level_3 is defined ? variables.level_3 }}" name="level_3" />
                        <label for="hit_die_3" title="Hit Die Type, e.g. 8 for a d8">Hit Die Type</label>
                        <input class="form-control" type="number" placeholder="eg 8 for 1d8" value="{{ variables.hit_die_3 is defined ? variables.hit_die_3 }}" name="hit_die_3" />
                    </div>
                    <div class="form-group dnd-sheet-container">
                        <label for="class_4">Class 4</label>
                        <input class="form-control" type="text" value="{{ variables.class_4 is defined ? variables.class_4 }}" placeholder="eg Bard, Fighter or Cleric" name="class_4" />
                        <label for="level_4">Level</label>
                        <input class="form-control" type="number" value="{{ variables.level_4 is defined ? variables.level_4 }}" name="level_4" />
                        <label for="hit_die_4" title="Hit Die Type, e.g. 8 for a d8">Hit Die Type</label>
                        <input class="form-control" type="number" placeholder="eg 8 for 1d8" value="{{ variables.hit_die_4 is defined ? variables.hit_die_4 }}" name="hit_die_4" />
                    </div>      
                </div>
               <p class="c dnd5e-sheet-description m-t-10 mt-1">
                Note: if you want to add a statblocks with details for each class, scroll down to Collections: Class Features.
               </p>
            </div>  
        </div>
    </div>
	<hr class="hr-dark">
	<div class="row mainbox">
        <div class="col-12 col-md-12">
            <label>Attributes</label> 
        </div>
		<div class="col-12 col-md-4 col-lg-2">
            <div class="dnd-sheet-box">
                <div class="form-group">
                    <label for="strength">Strength</label>
                    <input class="form-control c" type="number" value="{{ variables.strength is defined ? variables.strength }}" name="strength" />
                </div>
            </div>
        </div>
		<div class="col-12 col-md-4 col-lg-2">
            <div class="dnd-sheet-box">
                <div class="form-group">
                    <label for="dexterity">Dexterity</label>
                    <input class="form-control c" type="number" value="{{ variables.dexterity is defined ? variables.dexterity }}" name="dexterity" />
                </div>
            </div>
        </div>
		<div class="col-12 col-md-4 col-lg-2">
            <div class="dnd-sheet-box">
                <div class="form-group">
                    <label for="constitution">Constitution</label>
                    <input class="form-control c" type="number" value="{{ variables.constitution is defined ? variables.constitution }}" name="constitution" />
                </div>
            </div>
        </div>
		<div class="col-12 col-md-4 col-lg-2">
            <div class="dnd-sheet-box">
                <div class="form-group">
                    <label for="intelligence">Intelligence</label>
                    <input class="form-control c" type="number" value="{{ variables.intelligence is defined ? variables.intelligence }}" name="intelligence" />
                </div>
            </div>
        </div>
		<div class="col-12 col-md-4 col-lg-2">
            <div class="dnd-sheet-box">
                <div class="form-group">
                    <label for="wisdom">Wisdom</label>
                    <input class="form-control c" type="number" value="{{ variables.wisdom is defined ? variables.wisdom }}" name="wisdom" />
                </div> 
            </div>
        </div>
		<div class="col-12 col-md-4 col-lg-2">
            <div class="dnd-sheet-box">
                <div class="form-group">
                    <label for="charisma">Charisma</label>
                    <input class="form-control c" type="number" value="{{ variables.charisma is defined ? variables.charisma }}" name="charisma" />
                </div> 
            </div>
        </div>
        <div class="col-12 col-md-12">
            <p class="c dnd5e-sheet-description m-t-10 mt-1">
                Insert the value including and modifier from race, profession, class etc
            <p>
        </div>
        <div class="col-12 col-md-12">
            <label>Saving Throw Proficiencies</label> 
        </div>
        <div class="col-12 col-md-4 col-lg-2">
            <div class="form-group">
                <label for="strength_save_prof">STR</label>
                <input class="form-control" type="checkbox" value="1" {% if variables.strength_save_prof is defined and variables.strength_save_prof == 1 %}checked="checked"{% endif %} name="strength_save_prof" />
            </div>  
        </div>
        <div class="col-12 col-md-4 col-lg-2">
            <div class="form-group">
                <label for="dexterity_save_prof">DEX</label>
                <input class="form-control" type="checkbox" value="1" {% if variables.dexterity_save_prof is defined and variables.dexterity_save_prof == 1 %}checked="checked"{% endif %} name="dexterity_save_prof" />
            </div>  
        </div>
        <div class="col-12 col-md-4 col-lg-2">
            <div class="form-group">
                <label for="constitution_save_prof">CON</label>
                <input class="form-control" type="checkbox" value="1" {% if variables.constitution_save_prof is defined and variables.constitution_save_prof == 1 %}checked="checked"{% endif %} name="constitution_save_prof" />
            </div>  
        </div>
        <div class="col-12 col-md-4 col-lg-2">
            <div class="form-group">
                <label for="intelligence_save_prof">INT</label>
                <input class="form-control" type="checkbox" value="1" {% if variables.intelligence_save_prof is defined and variables.intelligence_save_prof == 1 %}checked="checked"{% endif %} name="intelligence_save_prof" />
            </div>  
        </div>
        <div class="col-12 col-md-4 col-lg-2">
            <div class="form-group">
                <label for="wisdom_save_prof">WIS</label>
                <input class="form-control" type="checkbox" value="1" {% if variables.wisdom_save_prof is defined and variables.wisdom_save_prof == 1 %}checked="checked"{% endif %} name="wisdom_save_prof" />
            </div>  
        </div>
        <div class="col-12 col-md-4 col-lg-2">
            <div class="form-group">
                <label for="charisma_save_prof">CHA</label>
                <input class="form-control" type="checkbox" value="1" {% if variables.charisma_save_prof is defined and variables.charisma_save_prof == 1 %}checked="checked"{% endif %} name="charisma_save_prof" />
            </div>  
        </div>
        <div class="col-12 col-md-12">
            <p class="c dnd5e-sheet-description m-t-10 mt-1">
            <label>Saving Throw Modifier through items etc ONTOP of the default modifier. Do NOT enter the modifier derived from the attribute here!</label>
           </p>
        </div>
        <div class="col-12 col-md-4 col-lg-2">
            <div class="form-group">
                <label for="strength_save_mod">STR</label>
                <input class="form-control c" type="number" value="{{ variables.strength_save_mod|default('') }}" name="strength_save_mod" />
            </div>  
        </div>
        <div class="col-12 col-md-4 col-lg-2">
            <div class="form-group">
                <label for="dexterity_save_mod">DEX</label>
                <input class="form-control c" type="number" value="{{ variables.dexterity_save_mod|default('') }}" name="dexterity_save_mod" />
            </div>  
        </div>
        <div class="col-12 col-md-4 col-lg-2">
            <div class="form-group">
                <label for="constitution_save_mod">CON</label>
                <input class="form-control c" type="number" value="{{ variables.constitution_save_mod|default('') }}" name="constitution_save_mod" />
            </div>  
        </div>
        <div class="col-12 col-md-4 col-lg-2">
            <div class="form-group">
                <label for="intelligence_save_mod">INT</label>
                <input class="form-control c" type="number" value="{{ variables.intelligence_save_mod|default('') }}" name="intelligence_save_mod" />
            </div>  
        </div>
        <div class="col-12 col-md-4 col-lg-2">
            <div class="form-group">
                <label for="wisdom_save_mod">WIS</label>
                <input class="form-control c" type="number" value="{{ variables.wisdom_save_mod|default('') }}" name="wisdom_save_mod" />
            </div>  
        </div>
        <div class="col-12 col-md-4 col-lg-2">
            <div class="form-group">
                <label for="charisma_save_mod">CHA</label>
                <input class="form-control c" type="number" value="{{ variables.charisma_save_mod|default('') }}" name="charisma_save_mod" />
            </div>  
        </div>
    </div>
    <div class="row mainbox">
        <div class="col-12 col-md-12">
            <div class="ac-hp-init-speed">
                <div class="row">
                    <!-- AC HP SPEED -->
                    <div class="col-12 col-md-4">
                        <div class="form-group">
                            <label for="armor_class">AC</label>
                            <input placeholder="(10)" class="form-control" type="number" value="{{ac}}" name="armor_class" />
                            <p class="dnd5e-sheet-description m-t-10 mt-1">leave empty for no armour</p>
                        </div>
                    </div>
                    <div class="col-12 col-md-4">
                        <div class="form-group">
                            <label for="armor_class_mod">AC MOD</label>
                            <input placeholder="(+0)" class="form-control" type="number" value="{{ variables.armor_class_mod is defined ? variables.armor_class_mod }}" name="armor_class_mod" />
                            <p class="dnd5e-sheet-description m-t-10 mt-1">modifier through items etc</p>
                        </div>
                    </div>
                    <div class="col-12 col-md-4">
                        <div class="form-group">
                            <label for="hit_points_first">HP 1st Lvl</label>
                            <input class="form-control" type="string" value="{{ variables.hit_points_first is defined ? variables.hit_points_first }}" name="hit_points_first" />
                            <p class="dnd5e-sheet-description m-t-10 mt-1">Hit Points for first level, leave empty for default (Hit Dice max + CON modifier)</p>
                        </div>  
                    </div>
                    <div class="col-12 col-md-4">
                        <div class="form-group">
                            <label for="hit_points">HP (current)</label>
                            {% set lbl = "Current Hit Points" %}
                            {% if variables.hit_points_current is defined and variables.hit_points_current > 0 %}
                            {% else %}
                                {% if chp == "" or chp > hp %}{% set chp = hp %}{% endif %}
                                {% if chp != 0 %}{% set lbl = "(" ~ chp ~ ")" %}{% set chp = "" %}{% endif %}
                            {% endif %}
                            <input placeholder="{{lbl}}" class="form-control c" type="number" value="{{ chp }}" name="hit_points_current" />
                            <p class="dnd5e-sheet-description m-t-10 mt-1">leave empty for default</p>
                        </div>  
                    </div>
                    <div class="col-12 col-md-4">
                        <div class="form-group">
                            <label for="hit_points">HP (max)</label>
                            {% set lbl = "Max Hit Points" %}
                            {% if variables.hit_points is defined and variables.hit_points > 0 %}
                            {% else %}
                                {% if hp != 0 %}{% set lbl = "(" ~ hp ~ ")" %}{% set hp = "" %}{% endif %}
                            {% endif %}
                            <input placeholder="{{lbl}}" class="form-control c" type="number" value="{{ hp }}" name="hit_points" min="0" />
                            <p class="dnd5e-sheet-description m-t-10 mt-1">leave empty for default</p>
                        </div>  
                    </div>
                    <div class="col-12 col-md-4">
                        <div class="form-group">
                            <label for="spellcasting_ability">Spellcasting Ability</label>
                            <select class="form-control" id="spellcasting_ability" name="spellcasting_ability">
                                <option value="NONE" {% if variables.spellcasting_ability is defined and variables.spellcasting_ability == "NONE" %}selected="selected" {% endif %} >NONE</option>
                                <option value="INT" {% if variables.spellcasting_ability is defined and variables.spellcasting_ability == "INT" %}selected="selected" {% endif %} >INT</option>
                                <option value="WIS" {% if variables.spellcasting_ability is defined and variables.spellcasting_ability == "WIS" %}selected="selected" {% endif %} >WIS</option>
                                <option value="CHA" {% if variables.spellcasting_ability is defined and variables.spellcasting_ability == "CHA" %}selected="selected" {% endif %} >CHA</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-12 col-md-4">
                        <div class="form-group">
                            <label for="speed">Speed (walk/run/fly)</label>
                            <input class="form-control" type="text" value="{{ variables.speed is defined ? variables.speed }}" name="speed" />
                        </div>
                    </div>
                    {% for i in 1..6 %}
                        {% if i == 1 %}
                            {% set label = variables.class_resource_label|default('') %}
                            {% set res = variables.class_resource|default('') %}
                            {% set curr = variables.class_resource_curr|default(res) %}
                            {% set labelfield = 'class_resource_label' %}
                            {% set resfield = 'class_resource' %}
                            {% set currfield = 'class_resource_curr' %}
                        {% else %}
                            {% set label = attribute(variables, 'class_resource_label_' ~ i)|default('') %}
                            {% set res = attribute(variables, 'class_resource_' ~ i)|default('') %}
                            {% set curr = attribute(variables, 'class_resource_curr_' ~ i)|default(res) %}
                            {% set labelfield = 'class_resource_label_' ~ i %}
                            {% set resfield = 'class_resource_' ~ i %}
                            {% set currfield = 'class_resource_curr_' ~ i %}
                        {% endif %}
                        <div class="col-12 col-md-4">
                            <div class="form-group">
                                <label for="{{labelfield}}">Class Resource {{i}} Name</label>
                                <input placeholder="Resource Name" class="form-control" type="text" value="{{label}}" name="{{labelfield}}" />
                                <label for="{{currfield}}">Current Value</label>
                                <input class="form-control" type="text" value="{{curr}}" name="{{currfield}}" />
                                <label for="{{resfield}}">Possible Max Value</label>
                                <input class="form-control" type="text" value="{{res}}" name="{{resfield}}" />
                                <p class="dnd5e-sheet-description m-t-10 mt-1">Ki for monks etc.</p>
                            </div>  
                        </div>
                    {% endfor %}
                    <p class="dnd5e-sheet-description m-t-10 mt-1">For class resources: enter the resource name in the first field (eg. 'Ki') and the possible maximum value / pool size
                    in the second field. The current value for the resource is being tracked on the tracking sheet.</p>
                </div>
            </div>
        </div>
    </div>
    <!-- Main Content -->
    <div class="row main-content-row" id="dnd5e-main-content">
        <!-- AC HP INIT SPEED + Technicals -->
        <div class="col-12 col-md-12 col-lg-5" id="dnd5e-second-column">
            <!-- Proficiency Bonus -->
            <div class="dnd-sheet-container profbonus">
                <div class="form-group">
                    <label for="proficiency_bonus">Proficiency Bonus</label>
                    +{{pb}}
                </div>
            </div>
            <div class="dnd-sheet-container">
                <div class="form-group">
                    <label for="initiative">Initiative Modifier (ontop of DEX MOD of {{ sheet.addSign(ini_dex, 'n') }})</label>
                    <input class="form-control" type="text" value="{{ini_mod}}" name="initiative_mod" />
                    <input type="hidden" value="" name="initiative" />
                </div>
            </div>
            <!-- Skills -->
            <div class="skillslist mainbox">
                <div class="dnd-sheet-container">
                    <p class="dnd5e-sheet-description m-t-10 mt-1">Only fill in skill modifiers from feats or items, attribute modifier + proficiency bonus are added automatically</p>
                    <table width="100%">
                        <tr>
                            <td class="pb">
                                <input class="form-control" type="checkbox" value="1" {% if variables.jack_of_all_trades is defined and variables.jack_of_all_trades == 1 %}checked="checked"{% endif %} name="jack_of_all_trades" />
                            </td>
                            <td colspan=4 class="l">
                                Bard: Jack of all Trades
                            </td>
                        </tr>
                        <tr>
                            <th width="30" class="od c" title="proficient (adds prof. bonus)">Pr</th>
                            <th width="30" class="od c" title="expertise (adds 2x prof. bonus)">Ex</th>
                            <th width="40%" class="od">Skill</th>
                            <th class="od" title="Attribute">Att</th>
                            <th class="od r">Value&nbsp;&nbsp;</th>
                        </tr>
                        <tr>
                            <td class="pb ev" title="proficient (adds prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.acrobatics_prof is defined and variables.acrobatics_prof == 1 %}checked="checked"{% endif %} name="acrobatics_prof" />
                            </td>
                            <td class="pb ev" title="expertise (adds 2x prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.acrobatics_exp is defined and variables.acrobatics_exp == 1 %}checked="checked"{% endif %} name="acrobatics_exp" />
                            </td>
                            <td class="ev">
                                Acrobatics
                            </td>
                            <td class="ev">
                                {{ sheet.AttSelect("acrobatics_att", variables.acrobatics_att|default(''), "dexterity") }}
                            </td>
                            <td class="ev">
                                <input class="form-control in-sm" type="number" value="{{ variables.acrobatics is defined ? variables.acrobatics }}" name="acrobatics" />
                            </td>
                        </tr>
                        <tr>
                            <td class="pb od" title="proficient (adds prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.animal_handling_prof is defined and variables.animal_handling_prof == 1 %}checked="checked"{% endif %} name="animal_handling_prof" />
                            </td>
                            <td class="pb od" title="expertise (adds 2x prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.animal_handling_exp is defined and variables.animal_handling_exp == 1 %}checked="checked"{% endif %} name="animal_handling_exp" />
                            </td>
                            <td class="od">
                                Animal Handling
                            </td>
                            <td class="od">
                                {{ sheet.AttSelect("animal_handling_att", variables.animal_handling_att|default(''), "wisdom") }}
                            </td>
                            <td class="od">
                                <input class="form-control in-sm" type="number" value="{{ variables.animal_handling is defined ? variables.animal_handling }}" name="animal_handling" />
                            </td>
                        </tr>
                        <tr>
                            <td class="pb ev" title="proficient (adds prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.arcana_prof is defined and variables.arcana_prof == 1 %}checked="checked"{% endif %} name="arcana_prof" />
                            </td>
                            <td class="pb ev" title="expertise (adds 2x prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.arcana_exp is defined and variables.arcana_exp == 1 %}checked="checked"{% endif %} name="arcana_exp" />
                            </td>
                            <td class="ev">
                                Arcana
                            </td>
                            <td class="ev">
                                {{ sheet.AttSelect("arcana_att", variables.arcana_att|default(''), "intelligence") }}
                            </td>
                            <td class="ev">
                                <input class="form-control in-sm" type="number" value="{{ variables.arcana is defined ? variables.arcana }}" name="arcana" />
                            </td>
                        </tr>
                        <tr>
                            <td class="pb od" title="proficient (adds prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.athletics_prof is defined and variables.athletics_prof == 1 %}checked="checked"{% endif %} name="athletics_prof" />
                            </td>
                            <td class="pb od" title="expertise (adds 2x prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.athletics_exp is defined and variables.athletics_exp == 1 %}checked="checked"{% endif %} name="athletics_exp" />
                            </td>
                            <td class="od">
                                Athletics
                            </td>
                            <td class="od">
                                {{ sheet.AttSelect("athletics_att", variables.athletics_att|default(''), "strength") }}
                            </td class="od">
                            <td>
                                <input class="form-control in-sm" type="number" value="{{ variables.athletics is defined ? variables.athletics }}" name="athletics" />
                            </td>
                        </tr>
                        <tr>
                            <td class="pb ev" title="proficient (adds prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.deception_prof is defined and variables.deception_prof == 1 %}checked="checked"{% endif %} name="deception_prof" />
                            </td>
                            <td class="pb ev" title="expertise (adds 2x prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.deception_exp is defined and variables.deception_exp == 1 %}checked="checked"{% endif %} name="deception_exp" />
                            </td>
                            <td class="ev">
                                Deception
                            </td>
                            <td class="ev">
                                {{ sheet.AttSelect("deception_att", variables.deception_att|default(''), "charisma") }}
                            </td>
                            <td class="ev">
                                <input class="form-control in-sm" type="number" value="{{ variables.deception is defined ? variables.deception }}" name="deception" />
                            </td>
                        </tr>
                        <tr>
                            <td class="pb od" title="proficient (adds prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.history_prof is defined and variables.history_prof == 1 %}checked="checked"{% endif %} name="history_prof" />
                            </td>
                            <td class="pb od" title="expertise (adds 2x prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.history_exp is defined and variables.history_exp == 1 %}checked="checked"{% endif %} name="history_exp" />
                            </td>
                            <td class="od">
                                History
                            </td>
                            <td class="od">
                                {{ sheet.AttSelect("history_att", variables.history_att|default(''), "intelligence") }}
                            </td>
                            <td class="od">
                                <input class="form-control in-sm" type="number" value="{{ variables.history is defined ? variables.history }}" name="history" />
                            </td>
                        </tr>
                        <tr>
                            <td class="pb ev" title="proficient (adds prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.insight_prof is defined and variables.insight_prof == 1 %}checked="checked"{% endif %} name="insight_prof" />
                            </td>
                            <td class="pb ev" title="expertise (adds 2x prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.insight_exp is defined and variables.insight_exp == 1 %}checked="checked"{% endif %} name="insight_exp" />
                            </td>
                            <td class="ev">
                                Insight
                            </td>
                            <td class="ev">
                                {{ sheet.AttSelect("insight_att", variables.insight_att|default(''), "wisdom") }}
                            </td>
                            <td class="ev">
                                <input class="form-control in-sm" type="number" value="{{ variables.insight is defined ? variables.insight }}" name="insight" />
                            </td>
                        </tr>
                        <tr>
                            <td class="pb od" title="proficient (adds prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.intimidation_prof is defined and variables.intimidation_prof == 1 %}checked="checked"{% endif %} name="intimidation_prof" />
                            </td>
                            <td class="pb od" title="expertise (adds 2x prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.intimidation_exp is defined and variables.intimidation_exp == 1 %}checked="checked"{% endif %} name="intimidation_exp" />
                            </td>
                            <td class="od">
                                Intimidation
                            </td>
                            <td class="od">
                                {{ sheet.AttSelect("intimidation_att", variables.intimidation_att|default(''), "charisma") }}
                            </td>
                            <td class="od">
                                <input class="form-control in-sm" type="number" value="{{ variables.intimidation is defined ? variables.intimidation }}" name="intimidation" />
                            </td>
                        </tr>
                        <tr>
                            <td class="pb ev" title="proficient (adds prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.investigation_prof is defined and variables.investigation_prof == 1 %}checked="checked"{% endif %} name="investigation_prof" />
                            </td>
                            <td class="pb ev" title="expertise (adds 2x prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.investigation_exp is defined and variables.investigation_exp == 1 %}checked="checked"{% endif %} name="investigation_exp" />
                            </td>
                            <td class="ev">
                                Investigation
                            </td>
                            <td class="ev">
                                {{ sheet.AttSelect("investigation_att", variables.investigation_att|default(''), "intelligence") }}
                            </td>
                            <td class="ev">
                                <input class="form-control in-sm" type="number" value="{{ variables.investigation is defined ? variables.investigation }}" name="investigation" />
                            </td>
                        </tr>
                        <tr>
                            <td class="pb od" title="proficient (adds prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.medicine_prof is defined and variables.medicine_prof == 1 %}checked="checked"{% endif %} name="medicine_prof" />
                            </td>
                            <td class="pb od" title="expertise (adds 2x prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.medicine_exp is defined and variables.medicine_exp == 1 %}checked="checked"{% endif %} name="medicine_exp" />
                            </td>
                            <td class="od">
                                Medicine
                            </td>
                            <td class="od">
                                {{ sheet.AttSelect("medicine_att", variables.medicine_att|default(''), "wisdom") }}
                            </td>
                            <td class="od">
                                <input class="form-control in-sm" type="number" value="{{ variables.medicine is defined ? variables.medicine }}" name="medicine" />
                            </td>
                        </tr>
                        <tr>
                            <td class="pb ev" title="proficient (adds prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.nature_prof is defined and variables.nature_prof == 1 %}checked="checked"{% endif %} name="nature_prof" />
                            </td>
                            <td class="pb ev" title="expertise (adds 2x prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.nature_exp is defined and variables.nature_exp == 1 %}checked="checked"{% endif %} name="nature_exp" />
                            </td>
                            <td class="ev">
                                Nature
                            </td>
                            <td class="ev">
                                {{ sheet.AttSelect("nature_att", variables.nature_att|default(''), "intelligence") }}
                            </td>
                            <td class="ev">
                                <input class="form-control in-sm" type="number" value="{{ variables.nature is defined ? variables.nature }}" name="nature" />
                            </td>
                        </tr>
                        <tr>
                            <td class="pb od" title="proficient (adds prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.perception_prof is defined and variables.perception_prof == 1 %}checked="checked"{% endif %} name="perception_prof" />
                            </td>
                            <td class="pb od" title="expertise (adds 2x prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.perception_exp is defined and variables.perception_exp == 1 %}checked="checked"{% endif %} name="perception_exp" />
                            </td>
                            <td class="od">
                                Perception
                            </td>
                            <td class="od">
                                {{ sheet.AttSelect("perception_att", variables.perception_att|default(''), "wisdom") }}
                            </td>
                            <td class="od">
                                <input class="form-control in-sm" type="number" value="{{ variables.perception is defined ? variables.perception }}" name="perception" />
                            </td>
                        </tr>
                        <tr>
                            <td class="pb ev" title="proficient (adds prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.performance_prof is defined and variables.performance_prof == 1 %}checked="checked"{% endif %} name="performance_prof" />
                            </td>
                            <td class="pb ev" title="expertise (adds 2x prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.performance_exp is defined and variables.performance_exp == 1 %}checked="checked"{% endif %} name="performance_exp" />
                            </td>
                            <td class="ev">
                                Performance
                            </td>
                            <td class="ev">
                                {{ sheet.AttSelect("performance_att", variables.performance_att|default(''), "charisma") }}
                            </td>
                            <td class="ev">
                                <input class="form-control in-sm" type="number" value="{{ variables.performance is defined ? variables.performance }}" name="performance" />
                            </td>
                        </tr>
                        <tr>
                            <td class="pb od" title="proficient (adds prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.persuasion_prof is defined and variables.persuasion_prof == 1 %}checked="checked"{% endif %} name="persuasion_prof" />
                            </td>
                            <td class="pb od" title="expertise (adds 2x prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.persuasion_exp is defined and variables.persuasion_exp == 1 %}checked="checked"{% endif %} name="persuasion_exp" />
                            </td>
                            <td class="od">
                                Persuasion
                            </td>
                            <td class="od">
                                {{ sheet.AttSelect("persuation_att", variables.persuation_att|default(''), "charisma") }}
                            </td>
                            <td class="od">
                                <input class="form-control in-sm" type="number" value="{{ variables.persuasion is defined ? variables.persuasion }}" name="persuasion" />
                            </td>
                        </tr>
                        <tr>
                            <td class="pb ev" title="proficient (adds prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.religion_prof is defined and variables.religion_prof == 1 %}checked="checked"{% endif %} name="religion_prof" />
                            </td>
                            <td class="pb ev" title="expertise (adds 2x prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.religion_exp is defined and variables.religion_exp == 1 %}checked="checked"{% endif %} name="religion_exp" />
                            </td>
                            <td class="ev">
                                Religion
                            </td>
                            <td class="ev">
                                {{ sheet.AttSelect("religion_att", variables.religion_att|default(''), "intelligence") }}
                            </td>
                            <td class="ev">
                                <input class="form-control in-sm" type="number" value="{{ variables.religion is defined ? variables.religion }}" name="religion" />
                            </td>
                        </tr>
                        <tr>
                            <td class="pb od" title="proficient (adds prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.sleight_of_hand_prof is defined and variables.sleight_of_hand_prof == 1 %}checked="checked"{% endif %} name="sleight_of_hand_prof" />
                            </td>
                            <td class="pb od" title="expertise (adds 2x prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.sleight_of_hand_exp is defined and variables.sleight_of_hand_exp == 1 %}checked="checked"{% endif %} name="sleight_of_hand_exp" />
                            </td>
                            <td class="od">
                                Sleight of Hand
                            </td>
                            <td class="od">
                                {{ sheet.AttSelect("sleight_of_hand_att", variables.sleight_of_hand_att|default(''), "dexterity") }}
                            </td>
                            <td class="od">
                                <input class="form-control in-sm" type="number" value="{{ variables.sleight_of_hand is defined ? variables.sleight_of_hand }}" name="sleight_of_hand" />
                            </td>
                        </tr>
                        <tr>
                            <td class="pb ev" title="proficient (adds prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.stealth_prof is defined and variables.stealth_prof == 1 %}checked="checked"{% endif %} name="stealth_prof" />
                            </td>
                            <td class="pb ev" title="expertise (adds 2x prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.stealth_exp is defined and variables.stealth_exp == 1 %}checked="checked"{% endif %} name="stealth_exp" />
                            </td>
                            <td class="ev">
                                Stealth
                            </td>
                            <td class="ev">
                                {{ sheet.AttSelect("stealth_att", variables.stealth_att|default(''), "dexterity") }}
                            </td>
                            <td class="ev">
                                <input class="form-control in-sm" type="number" value="{{ variables.stealth is defined ? variables.stealth }}" name="stealth" />
                            </td>
                        </tr>
                        <tr>
                            <td class="pb od" title="proficient (adds prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.survival_prof is defined and variables.survival_prof == 1 %}checked="checked"{% endif %} name="survival_prof" />
                            </td>
                            <td class="pb od" title="expertise (adds 2x prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.survival_exp is defined and variables.survival_exp == 1 %}checked="checked"{% endif %} name="survival_exp" />
                            </td>
                            <td class="od">
                                Survival
                            </td>
                            <td class="od">
                                {{ sheet.AttSelect("survival_att", variables.survival_att|default(''), "wisdom") }}
                            </td>
                            <td class="od">
                                <input class="form-control in-sm" type="number" value="{{ variables.survival is defined ? variables.survival }}" name="survival" />
                            </td>
                        </tr>
                        <tr>
                            <td class="pb od" title="proficient (adds prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.skill_prof_01 is defined and variables.skill_prof_01== 1 %}checked="checked"{% endif %} name="skill_prof_01" />
                            </td>
                            <td class="pb od" title="expertise (adds 2x prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.skill_exp_01 is defined and variables.skill_exp_01 == 1 %}checked="checked"{% endif %} name="skill_exp_01" />
                            </td>
                            <td class="od">
                                <input class="form-control in-mx c" type="text" value="{{ variables.skill_name_01 is defined ? variables.skill_name_01 }}" name="skill_name_01" />
                            </td>
                            <td class="od c">
                                {% set attr = 'strength' %}{% if variables.skill_attr_01 is defined and variables.skill_attr_01 != '' %}{% set attr = variables.skill_attr_01 %}{% endif %}
                                <select class="form-control" id="skill_attr_01" name="skill_attr_01">
                                    <option value="strength" {% if attr is defined and attr == "strength" %}selected="selected" {% endif %} >STR</option>
                                    <option value="dexterity" {% if attr is defined and attr == "dexterity" %}selected="selected" {% endif %} >DEX</option>
                                    <option value="constitution" {% if attr is defined and attr == "constitution" %}selected="selected" {% endif %} >CON</option>
                                    <option value="intelligence" {% if attr is defined and attr == "intelligence" %}selected="selected" {% endif %} >INT</option>
                                    <option value="wisdom" {% if attr is defined and attr == "wisdom" %}selected="selected" {% endif %} >WIS</option>
                                    <option value="charisma" {% if attr is defined and attr == "charisma" %}selected="selected" {% endif %} >CHA</option>
                                </select>
                            </td>
                            <td class="od">
                                <input class="form-control in-sm" type="number" value="{{ variables.skill_value_01 is defined ? variables.skill_value_01 }}" name="skill_value_01" />
                            </td>
                        </tr>
                        <tr>
                            <td class="pb od" title="proficient (adds prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.skill_prof_02 is defined and variables.skill_prof_02== 1 %}checked="checked"{% endif %} name="skill_prof_02" />
                            </td>
                            <td class="pb od" title="expertise (adds 2x prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.skill_exp_02 is defined and variables.skill_exp_02 == 1 %}checked="checked"{% endif %} name="skill_exp_02" />
                            </td>
                            <td class="od">
                                <input class="form-control in-mx c" type="text" value="{{ variables.skill_name_02 is defined ? variables.skill_name_02 }}" name="skill_name_02" />
                            </td>
                            <td class="od c">
                                {% set attr = 'strength' %}{% if variables.skill_attr_02 is defined and variables.skill_attr_02 != '' %}{% set attr = variables.skill_attr_02 %}{% endif %}
                                <select class="form-control" id="skill_attr_02" name="skill_attr_02">
                                    <option value="strength" {% if attr is defined and attr == "strength" %}selected="selected" {% endif %} >STR</option>
                                    <option value="dexterity" {% if attr is defined and attr == "dexterity" %}selected="selected" {% endif %} >DEX</option>
                                    <option value="constitution" {% if attr is defined and attr == "constitution" %}selected="selected" {% endif %} >CON</option>
                                    <option value="intelligence" {% if attr is defined and attr == "intelligence" %}selected="selected" {% endif %} >INT</option>
                                    <option value="wisdom" {% if attr is defined and attr == "wisdom" %}selected="selected" {% endif %} >WIS</option>
                                    <option value="charisma" {% if attr is defined and attr == "charisma" %}selected="selected" {% endif %} >CHA</option>
                                </select>
                            </td>
                            <td class="od">
                                <input class="form-control in-sm" type="number" value="{{ variables.skill_value_02 is defined ? variables.skill_value_02 }}" name="skill_value_02" />
                            </td>
                        </tr>
                        <tr>
                            <td class="pb od" title="proficient (adds prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.skill_prof_03 is defined and variables.skill_prof_03== 1 %}checked="checked"{% endif %} name="skill_prof_03" />
                            </td>
                            <td class="pb od" title="expertise (adds 2x prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.skill_exp_03 is defined and variables.skill_exp_03 == 1 %}checked="checked"{% endif %} name="skill_exp_03" />
                            </td>
                            <td class="od">
                                <input class="form-control in-mx c" type="text" value="{{ variables.skill_name_03 is defined ? variables.skill_name_03 }}" name="skill_name_03" />
                            </td>
                            <td class="od c">
                                {% set attr = 'strength' %}{% if variables.skill_attr_03 is defined and variables.skill_attr_03 != '' %}{% set attr = variables.skill_attr_03 %}{% endif %}
                                <select class="form-control" id="skill_attr_03" name="skill_attr_03">
                                    <option value="strength" {% if attr is defined and attr == "strength" %}selected="selected" {% endif %} >STR</option>
                                    <option value="dexterity" {% if attr is defined and attr == "dexterity" %}selected="selected" {% endif %} >DEX</option>
                                    <option value="constitution" {% if attr is defined and attr == "constitution" %}selected="selected" {% endif %} >CON</option>
                                    <option value="intelligence" {% if attr is defined and attr == "intelligence" %}selected="selected" {% endif %} >INT</option>
                                    <option value="wisdom" {% if attr is defined and attr == "wisdom" %}selected="selected" {% endif %} >WIS</option>
                                    <option value="charisma" {% if attr is defined and attr == "charisma" %}selected="selected" {% endif %} >CHA</option>
                                </select>
                            </td>
                            <td class="od">
                                <input class="form-control in-sm" type="number" value="{{ variables.skill_value_03 is defined ? variables.skill_value_03 }}" name="skill_value_03" />
                            </td>
                        </tr>
                        <tr>
                            <td class="pb od" title="proficient (adds prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.skill_prof_04 is defined and variables.skill_prof_04== 1 %}checked="checked"{% endif %} name="skill_prof_04" />
                            </td>
                            <td class="pb od" title="expertise (adds 2x prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.skill_exp_04 is defined and variables.skill_exp_04 == 1 %}checked="checked"{% endif %} name="skill_exp_04" />
                            </td>
                            <td class="od">
                                <input class="form-control in-mx c" type="text" value="{{ variables.skill_name_04 is defined ? variables.skill_name_04 }}" name="skill_name_04" />
                            </td>
                            <td class="od c">
                                {% set attr = 'strength' %}{% if variables.skill_attr_04 is defined and variables.skill_attr_04 != '' %}{% set attr = variables.skill_attr_04 %}{% endif %}
                                <select class="form-control" id="skill_attr_04" name="skill_attr_04">
                                    <option value="strength" {% if attr is defined and attr == "strength" %}selected="selected" {% endif %} >STR</option>
                                    <option value="dexterity" {% if attr is defined and attr == "dexterity" %}selected="selected" {% endif %} >DEX</option>
                                    <option value="constitution" {% if attr is defined and attr == "constitution" %}selected="selected" {% endif %} >CON</option>
                                    <option value="intelligence" {% if attr is defined and attr == "intelligence" %}selected="selected" {% endif %} >INT</option>
                                    <option value="wisdom" {% if attr is defined and attr == "wisdom" %}selected="selected" {% endif %} >WIS</option>
                                    <option value="charisma" {% if attr is defined and attr == "charisma" %}selected="selected" {% endif %} >CHA</option>
                                </select>
                            </td>
                            <td class="od">
                                <input class="form-control in-sm" type="number" value="{{ variables.skill_value_04 is defined ? variables.skill_value_04 }}" name="skill_value_04" />
                            </td>
                        </tr>
                        <tr>
                            <td class="pb od" title="proficient (adds prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.skill_prof_05 is defined and variables.skill_prof_05== 1 %}checked="checked"{% endif %} name="skill_prof_05" />
                            </td>
                            <td class="pb od" title="expertise (adds 2x prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.skill_exp_05 is defined and variables.skill_exp_05 == 1 %}checked="checked"{% endif %} name="skill_exp_05" />
                            </td>
                            <td class="od">
                                <input class="form-control in-mx c" type="text" value="{{ variables.skill_name_05 is defined ? variables.skill_name_05 }}" name="skill_name_05" />
                            </td>
                            <td class="od c">
                                {% set attr = 'strength' %}{% if variables.skill_attr_05 is defined and variables.skill_attr_05 != '' %}{% set attr = variables.skill_attr_05 %}{% endif %}
                                <select class="form-control" id="skill_attr_05" name="skill_attr_05">
                                    <option value="strength" {% if attr is defined and attr == "strength" %}selected="selected" {% endif %} >STR</option>
                                    <option value="dexterity" {% if attr is defined and attr == "dexterity" %}selected="selected" {% endif %} >DEX</option>
                                    <option value="constitution" {% if attr is defined and attr == "constitution" %}selected="selected" {% endif %} >CON</option>
                                    <option value="intelligence" {% if attr is defined and attr == "intelligence" %}selected="selected" {% endif %} >INT</option>
                                    <option value="wisdom" {% if attr is defined and attr == "wisdom" %}selected="selected" {% endif %} >WIS</option>
                                    <option value="charisma" {% if attr is defined and attr == "charisma" %}selected="selected" {% endif %} >CHA</option>
                                </select>
                            </td>
                            <td class="od">
                                <input class="form-control in-sm" type="number" value="{{ variables.skill_value_05 is defined ? variables.skill_value_05 }}" name="skill_value_05" />
                            </td>
                        </tr>
                        <tr>
                            <td class="pb od" title="proficient (adds prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.skill_prof_06 is defined and variables.skill_prof_06== 1 %}checked="checked"{% endif %} name="skill_prof_06" />
                            </td>
                            <td class="pb od" title="expertise (adds 2x prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.skill_exp_06 is defined and variables.skill_exp_06 == 1 %}checked="checked"{% endif %} name="skill_exp_06" />
                            </td>
                            <td class="od">
                                <input class="form-control in-mx c" type="text" value="{{ variables.skill_name_06 is defined ? variables.skill_name_06 }}" name="skill_name_06" />
                            </td>
                            <td class="od c">
                                {% set attr = 'strength' %}{% if variables.skill_attr_06 is defined and variables.skill_attr_06 != '' %}{% set attr = variables.skill_attr_06 %}{% endif %}
                                <select class="form-control" id="skill_attr_06" name="skill_attr_06">
                                    <option value="strength" {% if attr is defined and attr == "strength" %}selected="selected" {% endif %} >STR</option>
                                    <option value="dexterity" {% if attr is defined and attr == "dexterity" %}selected="selected" {% endif %} >DEX</option>
                                    <option value="constitution" {% if attr is defined and attr == "constitution" %}selected="selected" {% endif %} >CON</option>
                                    <option value="intelligence" {% if attr is defined and attr == "intelligence" %}selected="selected" {% endif %} >INT</option>
                                    <option value="wisdom" {% if attr is defined and attr == "wisdom" %}selected="selected" {% endif %} >WIS</option>
                                    <option value="charisma" {% if attr is defined and attr == "charisma" %}selected="selected" {% endif %} >CHA</option>
                                </select>
                            </td>
                            <td class="od">
                                <input class="form-control in-sm" type="number" value="{{ variables.skill_value_06 is defined ? variables.skill_value_06 }}" name="skill_value_06" />
                            </td>
                        </tr>
                        <tr>
                            <td class="pb od" title="proficient (adds prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.skill_prof_07 is defined and variables.skill_prof_07== 1 %}checked="checked"{% endif %} name="skill_prof_07" />
                            </td>
                            <td class="pb od" title="expertise (adds 2x prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.skill_exp_07 is defined and variables.skill_exp_07 == 1 %}checked="checked"{% endif %} name="skill_exp_07" />
                            </td>
                            <td class="od">
                                <input class="form-control in-mx c" type="text" value="{{ variables.skill_name_07 is defined ? variables.skill_name_07 }}" name="skill_name_07" />
                            </td>
                            <td class="od c">
                                {% set attr = 'strength' %}{% if variables.skill_attr_07 is defined and variables.skill_attr_07 != '' %}{% set attr = variables.skill_attr_07 %}{% endif %}
                                <select class="form-control" id="skill_attr_07" name="skill_attr_07">
                                    <option value="strength" {% if attr is defined and attr == "strength" %}selected="selected" {% endif %} >STR</option>
                                    <option value="dexterity" {% if attr is defined and attr == "dexterity" %}selected="selected" {% endif %} >DEX</option>
                                    <option value="constitution" {% if attr is defined and attr == "constitution" %}selected="selected" {% endif %} >CON</option>
                                    <option value="intelligence" {% if attr is defined and attr == "intelligence" %}selected="selected" {% endif %} >INT</option>
                                    <option value="wisdom" {% if attr is defined and attr == "wisdom" %}selected="selected" {% endif %} >WIS</option>
                                    <option value="charisma" {% if attr is defined and attr == "charisma" %}selected="selected" {% endif %} >CHA</option>
                                </select>
                            </td>
                            <td class="od">
                                <input class="form-control in-sm" type="number" value="{{ variables.skill_value_07 is defined ? variables.skill_value_07 }}" name="skill_value_07" />
                            </td>
                        </tr>
                        <tr>
                            <td class="pb od" title="proficient (adds prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.skill_prof_08 is defined and variables.skill_prof_08== 1 %}checked="checked"{% endif %} name="skill_prof_08" />
                            </td>
                            <td class="pb od" title="expertise (adds 2x prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.skill_exp_08 is defined and variables.skill_exp_08 == 1 %}checked="checked"{% endif %} name="skill_exp_08" />
                            </td>
                            <td class="od">
                                <input class="form-control in-mx c" type="text" value="{{ variables.skill_name_08 is defined ? variables.skill_name_08 }}" name="skill_name_08" />
                            </td>
                            <td class="od c">
                                {% set attr = 'strength' %}{% if variables.skill_attr_08 is defined and variables.skill_attr_08 != '' %}{% set attr = variables.skill_attr_08 %}{% endif %}
                                <select class="form-control" id="skill_attr_08" name="skill_attr_08">
                                    <option value="strength" {% if attr is defined and attr == "strength" %}selected="selected" {% endif %} >STR</option>
                                    <option value="dexterity" {% if attr is defined and attr == "dexterity" %}selected="selected" {% endif %} >DEX</option>
                                    <option value="constitution" {% if attr is defined and attr == "constitution" %}selected="selected" {% endif %} >CON</option>
                                    <option value="intelligence" {% if attr is defined and attr == "intelligence" %}selected="selected" {% endif %} >INT</option>
                                    <option value="wisdom" {% if attr is defined and attr == "wisdom" %}selected="selected" {% endif %} >WIS</option>
                                    <option value="charisma" {% if attr is defined and attr == "charisma" %}selected="selected" {% endif %} >CHA</option>
                                </select>
                            </td>
                            <td class="od">
                                <input class="form-control in-sm" type="number" value="{{ variables.skill_value_08 is defined ? variables.skill_value_08 }}" name="skill_value_08" />
                            </td>
                        </tr>
                        <tr>
                            <td class="pb od" title="proficient (adds prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.skill_prof_09 is defined and variables.skill_prof_09== 1 %}checked="checked"{% endif %} name="skill_prof_09" />
                            </td>
                            <td class="pb od" title="expertise (adds 2x prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.skill_exp_09 is defined and variables.skill_exp_09 == 1 %}checked="checked"{% endif %} name="skill_exp_09" />
                            </td>
                            <td class="od">
                                <input class="form-control in-mx c" type="text" value="{{ variables.skill_name_09 is defined ? variables.skill_name_09 }}" name="skill_name_09" />
                            </td>
                            <td class="od c">
                                {% set attr = 'strength' %}{% if variables.skill_attr_09 is defined and variables.skill_attr_09 != '' %}{% set attr = variables.skill_attr_09 %}{% endif %}
                                <select class="form-control" id="skill_attr_09" name="skill_attr_09">
                                    <option value="strength" {% if attr is defined and attr == "strength" %}selected="selected" {% endif %} >STR</option>
                                    <option value="dexterity" {% if attr is defined and attr == "dexterity" %}selected="selected" {% endif %} >DEX</option>
                                    <option value="constitution" {% if attr is defined and attr == "constitution" %}selected="selected" {% endif %} >CON</option>
                                    <option value="intelligence" {% if attr is defined and attr == "intelligence" %}selected="selected" {% endif %} >INT</option>
                                    <option value="wisdom" {% if attr is defined and attr == "wisdom" %}selected="selected" {% endif %} >WIS</option>
                                    <option value="charisma" {% if attr is defined and attr == "charisma" %}selected="selected" {% endif %} >CHA</option>
                                </select>
                            </td>
                            <td class="od">
                                <input class="form-control in-sm" type="number" value="{{ variables.skill_value_09 is defined ? variables.skill_value_09 }}" name="skill_value_09" />
                            </td>
                        </tr>
                        <tr>
                            <td class="pb od" title="proficient (adds prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.skill_prof_10 is defined and variables.skill_prof_10== 1 %}checked="checked"{% endif %} name="skill_prof_10" />
                            </td>
                            <td class="pb od" title="expertise (adds 2x prof. bonus)">
                                <input class="form-control" type="checkbox" value="1" {% if variables.skill_exp_10 is defined and variables.skill_exp_10 == 1 %}checked="checked"{% endif %} name="skill_exp_10" />
                            </td>
                            <td class="od">
                                <input class="form-control in-mx c" type="text" value="{{ variables.skill_name_10 is defined ? variables.skill_name_10 }}" name="skill_name_10" />
                            </td>
                            <td class="od c">
                                {% set attr = 'strength' %}{% if variables.skill_attr_10 is defined and variables.skill_attr_10 != '' %}{% set attr = variables.skill_attr_10 %}{% endif %}
                                <select class="form-control" id="skill_attr_10" name="skill_attr_10">
                                    <option value="strength" {% if attr is defined and attr == "strength" %}selected="selected" {% endif %} >STR</option>
                                    <option value="dexterity" {% if attr is defined and attr == "dexterity" %}selected="selected" {% endif %} >DEX</option>
                                    <option value="constitution" {% if attr is defined and attr == "constitution" %}selected="selected" {% endif %} >CON</option>
                                    <option value="intelligence" {% if attr is defined and attr == "intelligence" %}selected="selected" {% endif %} >INT</option>
                                    <option value="wisdom" {% if attr is defined and attr == "wisdom" %}selected="selected" {% endif %} >WIS</option>
                                    <option value="charisma" {% if attr is defined and attr == "charisma" %}selected="selected" {% endif %} >CHA</option>
                                </select>
                            </td>
                            <td class="od">
                                <input class="form-control in-sm" type="number" value="{{ variables.skill_value_10 is defined ? variables.skill_value_10 }}" name="skill_value_10" />
                            </td>
                        </tr>
                    </table>
                </div>  
            </div>  
        </div>
        <div class="col-12 col-md-12 col-lg-7" id="dnd5e-third-column">
            <div class="row mainbox">
            <!-- Technicals -->
                <div class="col-12 col-md-12">
                    <!-- Attacks -->
                    <div class="dnd-sheet-container">
                        <div class="form-group of">
                            <label for="attacktable">List of Attacks / Weapons</label>
                            <table width="100%" class="attacktable" id="attacktable">
                                <tr>
                                    <th title="Proficiency">Pr</th>
                                    <th title="Attack / Weapon Name">Name</th>
                                    <th title="Attribute used for attack" class="w90">Attr</th>
                                    <th title="Attack Modfier, eg. +1 for a magical item" class="w50">Mod</th>
                                    <th title="Damage" class="w90">Dmg</th>
                                    <th title="Damage Type">Dmg Type</th>
                                </tr>
                                {{ sheet.attack("01", variables.attack_prof_01|default(''), variables.attack_01|default(''), variables.attack_attr_01|default(''), variables.attack_mod_01|default(''), variables.attack_dmg_01|default(''), variables.attack_dmg_type_01|default(''), variables.attack_props_01|default('')) }}
                                {{ sheet.attack("02", variables.attack_prof_02|default(''), variables.attack_02|default(''), variables.attack_attr_02|default(''), variables.attack_mod_02|default(''), variables.attack_dmg_02|default(''), variables.attack_dmg_type_02|default(''), variables.attack_props_02|default('')) }}
                                {{ sheet.attack("03", variables.attack_prof_03|default(''), variables.attack_03|default(''), variables.attack_attr_03|default(''), variables.attack_mod_03|default(''), variables.attack_dmg_03|default(''), variables.attack_dmg_type_03|default(''), variables.attack_props_03|default('')) }}
                                {{ sheet.attack("04", variables.attack_prof_04|default(''), variables.attack_04|default(''), variables.attack_attr_04|default(''), variables.attack_mod_04|default(''), variables.attack_dmg_04|default(''), variables.attack_dmg_type_04|default(''), variables.attack_props_04|default('')) }}
                                {{ sheet.attack("05", variables.attack_prof_05|default(''), variables.attack_05|default(''), variables.attack_attr_05|default(''), variables.attack_mod_05|default(''), variables.attack_dmg_05|default(''), variables.attack_dmg_type_05|default(''), variables.attack_props_05|default('')) }}
                                {{ sheet.attack("06", variables.attack_prof_06|default(''), variables.attack_06|default(''), variables.attack_attr_06|default(''), variables.attack_mod_06|default(''), variables.attack_dmg_06|default(''), variables.attack_dmg_type_06|default(''), variables.attack_props_06|default('')) }}
                                {{ sheet.attack("07", variables.attack_prof_07|default(''), variables.attack_07|default(''), variables.attack_attr_07|default(''), variables.attack_mod_07|default(''), variables.attack_dmg_07|default(''), variables.attack_dmg_type_07|default(''), variables.attack_props_07|default('')) }}
                                {{ sheet.attack("08", variables.attack_prof_08|default(''), variables.attack_08|default(''), variables.attack_attr_08|default(''), variables.attack_mod_08|default(''), variables.attack_dmg_08|default(''), variables.attack_dmg_type_08|default(''), variables.attack_props_08|default('')) }}
                                {{ sheet.attack("09", variables.attack_prof_09|default(''), variables.attack_09|default(''), variables.attack_attr_09|default(''), variables.attack_mod_09|default(''), variables.attack_dmg_09|default(''), variables.attack_dmg_type_09|default(''), variables.attack_props_09|default('')) }}
                                {{ sheet.attack("10", variables.attack_prof_10|default(''), variables.attack_10|default(''), variables.attack_attr_10|default(''), variables.attack_mod_10|default(''), variables.attack_dmg_10|default(''), variables.attack_dmg_type_10|default(''), variables.attack_props_10|default('')) }}
                            </table>
                        </div>                  
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-12 col-sm-12">
            <!-- Proficiences -->
            <div class="dnd-sheet-container">
                <div class="form-group">
                    <label for="proficiences_and_languages">Languages &amp; Proficiencies</label>
                    <textarea name="proficiences_and_languages" class="form-control mention" rows="3">{{ variables.proficiences_and_languages is defined ? variables.proficiences_and_languages }}</textarea>
                </div> 
            </div>
        </div>
        <div class="col-12 col-sm-12">
            <!-- Spellcasting -->
            <div class="dnd-sheet-container">
                <div class="form-group">
                    <label for="spellcasting">Spellcasting</label>
                    <textarea  name="spellcasting" class="form-control mention" rows="3">{{ variables.spellcasting is defined ? variables.spellcasting }}</textarea>
                </div>                  
            </div>
        </div>
        <div class="col-12 col-sm-12">
            <!-- Equipment -->
            <div class="dnd-sheet-container">
                <div class="form-group">
                    <label for="copper_pieces">Copper</label>
                    <input class="form-control in-sm" type="number" value="{{ variables.copper_pieces ?? 0 }}" name="copper_pieces" />
                    <label for="silver_pieces">Silver</label>
                    <input class="form-control in-sm" type="number" value="{{ variables.silver_pieces ?? 0 }}" name="silver_pieces" />
                    <label for="electrum_pieces">Electrum</label>
                    <input class="form-control in-sm" type="number" value="{{ variables.electrum_pieces ?? 0 }}" name="electrum_pieces" />
                    <label for="gold_pieces">Gold</label>
                    <input class="form-control in-sm" type="number" value="{{ variables.gold_pieces ?? 0 }}" name="gold_pieces" />
                    <label for="platinum_pieces">Platinum</label>
                    <input class="form-control in-sm" type="number" value="{{ variables.platinum_pieces ?? 0 }}" name="platinum_pieces" />
                </div>                      
            </div>
        </div>
        <div class="col-12 col-sm-12">
            <!-- Equipment -->
            <div class="dnd-sheet-container">
                <div class="form-group">
                    <label for="equipment">Equipment</label>
                    <textarea name="equipment" class="form-control mention" rows="3">{{ variables.equipment is defined ? variables.equipment }}</textarea>
                </div>                      
            </div>
        </div>
        <div class="col-12 col-sm-12">
            <!-- Personality Traits -->
            <div class="dnd-sheet-container">
                <div class="form-group">
                    <label for="personality_trait">Personality Traits</label>
                        <textarea  name="personality_trait" class="form-control mention" rows="3">{{ variables.personality_trait is defined ? variables.personality_trait }}</textarea>
                </div>      
            </div>
        </div>
        <div class="col-12 col-sm-12">
            <!-- Ideals -->
            <div class="dnd-sheet-container">
                <div class="form-group">
                    <label for="ideal">Ideals</label>
                        <textarea  name="ideal" class="form-control mention" rows="3">{{ variables.ideal is defined ? variables.ideal }}</textarea>
                </div>          
            </div>
        </div>
        <div class="col-12 col-sm-12">
            <!-- Bonds -->
            <div class="dnd-sheet-container">
                <div class="form-group">
                    <label for="bond">Bonds</label>
                    <textarea  name="bond" class="form-control mention" rows="3">{{ variables.bond is defined ? variables.bond }}</textarea>
                </div>      
            </div>
        </div>
        <div class="col-12 col-sm-12">
            <!-- Flaws -->
            <div class="dnd-sheet-container">
                <div class="form-group">
                    <label for="flaw">Flaws</label>
                    <textarea  name="flaw" class="form-control mention" rows="3">{{ variables.flaw is defined ? variables.flaw }}</textarea>
                </div>      
            </div>
        </div>
        <div class="col-12 col-sm-12">
            <!-- Features & Traits -->
            <div class="dnd-sheet-container">
                <div class="form-group">
                    <label for="features_and_traits">Features &amp; Traits</label>
                    <textarea  name="features_and_traits" class="form-control mention" rows="3">{{ variables.features_and_traits is defined ? variables.features_and_traits }}</textarea>
                </div>
            </div>
        </div>
        <div class="col-12 col-sm-12">
            <!-- Notes -->
            <div class="dnd-sheet-container">
                <div class="form-group">
                    <label for="notes">Notes</label>
                    <textarea  name="notes" class="form-control mention" rows="3">{{ variables.notes is defined ? variables.notes }}</textarea>
                </div>
            </div>
        </div>
    </div>
    <hr>
    <div class="row footer-row" id="dnd5e-footer">
        <div class="col-12 col-md-12">
            <label for="">Spell Slots per Spell level</label>
        </div>
        <div class="col-12 col-md-2">
            <input placeholder="1-Level" class="form-control" type="text" value="{{ variables.total_spell_slots_1 is defined ? variables.total_spell_slots_1 }}" name="total_spell_slots_1" />
        </div>
        <div class="col-12 col-md-2">
            <input placeholder="2-Level" class="form-control" type="text" value="{{ variables.total_spell_slots_2 is defined ? variables.total_spell_slots_2 }}" name="total_spell_slots_2" />
        </div>
        <div class="col-12 col-md-2">
            <input placeholder="3-Level" class="form-control" type="text" value="{{ variables.total_spell_slots_3 is defined ? variables.total_spell_slots_3 }}" name="total_spell_slots_3" />
        </div>
        <div class="col-12 col-md-2">
            <input placeholder="4-Level" class="form-control" type="text" value="{{ variables.total_spell_slots_4 is defined ? variables.total_spell_slots_4 }}" name="total_spell_slots_4" />
        </div>
        <div class="col-12 col-md-2">
            <input placeholder="5-Level" class="form-control" type="text" value="{{ variables.total_spell_slots_5 is defined ? variables.total_spell_slots_5 }}" name="total_spell_slots_5" />
        </div>
        <div class="col-12 col-md-2">
            <input placeholder="6-Level" class="form-control" type="text" value="{{ variables.total_spell_slots_6 is defined ? variables.total_spell_slots_6 }}" name="total_spell_slots_6" />
        </div>
        <div class="col-12 col-md-2">
            <input placeholder="7-Level" class="form-control" type="text" value="{{ variables.total_spell_slots_7 is defined ? variables.total_spell_slots_7 }}" name="total_spell_slots_7" />
        </div>
        <div class="col-12 col-md-2">
            <input placeholder="8-Level" class="form-control" type="text" value="{{ variables.total_spell_slots_8 is defined ? variables.total_spell_slots_8 }}" name="total_spell_slots_8" />
        </div>
        <div class="col-12 col-md-2">
            <input placeholder="9-Level" class="form-control" type="text" value="{{ variables.total_spell_slots_9 is defined ? variables.total_spell_slots_9 }}" name="total_spell_slots_9" />
        </div>
    </div>
    <hr>
    <div class="row collections-row" id="dnd5e-collections">
        <div class="col-12 col-md-12">
            <h1>Collections <small class="text-muted">Attached sheets</small></h1>
            <p class="dnd5e-sheet-description m-t-10 mt-1">
                Collections allow you to attach additional sheets like magical items, your spells, your companions, assets etc. to your character sheet. 
                <br>
                To add the sheets just enter the IDs of the sheets you want on each collection, separated by commas "," 
                <br>
                <strong>For example adding 51,52,123</strong> to the "Arms and Equipment" collection will make those items accessible under the tab with the same name!
            </p>
        </div>
        <div class="col-12 col-md-6 col-lg-4">
            <div class="dnd-sheet-container">
                <div class="form-group">
                    <label for="arms_and_equipment">Arms &amp; Equipment</label>
                    <textarea placeholder="81,112,120" name="arms_and_equipment" class="form-control" rows="2">{{ variables.arms_and_equipment is defined ? variables.arms_and_equipment|replace({'[block:' : '', ']' : ''}) }}</textarea>
                    <p class="dnd5e-sheet-description m-t-10 mt-1">
                        <a target="_blank" href="{{ path('rpg_system',{'reference':'dnd5e'}) }}?template=2999">Open the DnD 5e List of Items</a> or <a target="_blank" href="{{ path('heroes_sheet_list')}}">create a new statblock</a></a>
                    </p>
                </div>          
            </div>
        </div>
        <div class="col-12 col-md-6 col-lg-4">
            <div class="dnd-sheet-container">
                <div class="form-group">
                    <label for="class_features">Class Features</label>
                    <textarea placeholder="2016,8415" name="class_features" class="form-control" rows="2">{{ variables.class_features is defined ? variables.class_features|replace({'[block:' : '', ']' : ''}) }}</textarea>
                    <p class="dnd5e-sheet-description m-t-10 mt-1">
                        <a target="_blank" href="{{ path('rpg_system',{'reference':'dnd5e'}) }}?template=5460">Open the DnD 5e List of Class Features</a> or <a target="_blank" href="{{ path('heroes_sheet_list')}}">create a new statblock</a></a>
                    </p>
                </div>          
            </div>
        </div>
        <div class="col-12 col-md-6 col-lg-4">
            <div class="dnd-sheet-container">
                <div class="form-group">
                    <label for="creatures_and_mounts">Creatures &amp; Mounts</label>
                    <textarea placeholder="196,199" name="creatures_and_mounts" class="form-control" rows="2">{{ variables.creatures_and_mounts is defined ? variables.creatures_and_mounts|replace({'[block:' : '', ']' : ''}) }}</textarea>
                    <p class="dnd5e-sheet-description m-t-10 mt-1">
                        <a target="_blank" href="{{ path('rpg_system',{'reference':'dnd5e'}) }}?template=2991">Open the DnD 5e List of Monsters</a> or <a target="_blank" href="{{ path('heroes_sheet_list')}}">create a new statblock</a></a>
                    </p>
                </div>          
            </div>
        </div>
        <div class="col-12 col-md-6 col-lg-4">
            <div class="dnd-sheet-container">
                <div class="form-group">
                    <label for="possessions_and_property">Possessions &amp; Property</label>
                    <textarea placeholder="18431,19683" name="possessions_and_property" class="form-control" rows="2">{{ variables.possessions_and_property is defined ? variables.possessions_and_property|replace({'[block:' : '', ']' : ''}) }}</textarea>
                    <p class="dnd5e-sheet-description m-t-10 mt-1">
                        <a target="_blank" href="{{ path('rpg_system',{'reference':'dnd5e'}) }}?template=2999">Open the DnD 5e List of Items</a> or <a target="_blank" href="{{ path('heroes_sheet_list')}}">create a new statblock</a></a>
                    </p>
                </div>          
            </div>
        </div>
        <div class="col-12 col-md-6 col-lg-4">
            <div class="dnd-sheet-container">
                <div class="form-group">
                    <label for="racestatblock">Race</label>
                    <textarea name="racestatblock" class="form-control" rows="1">{{ variables.racestatblock is defined ? variables.racestatblock|replace({'[block:' : '', ']' : ''}) }}</textarea>
                    <p class="dnd5e-sheet-description m-t-10 mt-1">
                        <a target="_blank" href="{{ path('rpg_system',{'reference':'dnd5e'}) }}?template=5520">Open the DnD 5e List of Races</a> or <a target="_blank" href="{{ path('heroes_sheet_list')}}">create a new statblock</a></a>
                    </p>
                </div>          
            </div>
        </div>
        <div class="col-12 col-md-6 col-lg-4">
            <div class="dnd-sheet-container">
                <div class="form-group">
                    <label for="retinue">Allies, Companions &amp; Retinue</label>
                    <textarea name="retinue" class="form-control" rows="2">{{ variables.retinue is defined ? variables.retinue|replace({'[block:' : '', ']' : ''}) }}</textarea>
                    <p class="dnd5e-sheet-description m-t-10 mt-1">
                        <a target="_blank" href="{{ path('rpg_system',{'reference':'dnd5e'}) }}?template=2991">Open the DnD 5e List of Monsters</a> or <a target="_blank" href="{{ path('heroes_sheet_list')}}">create a new statblock</a></a>
                    </p>
                </div>          
            </div>
        </div>
        <div class="col-12 col-md-12">
            <h2>Your Spellbook <small class="text-muted">(Known spells)</small></h2>
            <p class="dnd5e-sheet-description m-t-10 mt-1">
                Add the IDs of the spells you want on the appropriate section of your spellbook. If you do not need the attached stat blocks for the spells, use the Spellbook at the end of the sheet instead.<br>
                <a target="_blank" href="{{ path('rpg_system',{'reference':'dnd5e'}) }}?template=3000">Open the DnD 5e List of Spells</a> and copy the IDs you want, or <a target="_blank" href="{{ path('heroes_sheet_list')}}">create a new statblock</a>
            </p>
            <div class="dnd-sheet-container">
                <div class="row">
                    <div class="col-12 col-md-4 mb-3">
                        <input placeholder="0-Level" class="form-control" type="text" value="{{ variables.spellbook_0_level_spells is defined ? variables.spellbook_0_level_spells|replace({'[block:' : '', ']' : ''}) }}" name="spellbook_0_level_spells" />    
                    </div>
                    <div class="col-12 col-md-4 mb-3">
                        <input placeholder="1-Level" class="form-control" type="text" value="{{ variables.spellbook_1_level_spells is defined ? variables.spellbook_1_level_spells|replace({'[block:' : '', ']' : ''}) }}" name="spellbook_1_level_spells" /> 
                    </div>
                    <div class="col-12 col-md-4 mb-3">
                        <input placeholder="2-level" class="form-control" type="text" value="{{ variables.spellbook_2_level_spells is defined ? variables.spellbook_2_level_spells|replace({'[block:' : '', ']' : ''}) }}" name="spellbook_2_level_spells" /> 
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-md-4 mb-3">
                        <input placeholder="3-Level" class="form-control" type="text" value="{{ variables.spellbook_3_level_spells is defined ? variables.spellbook_3_level_spells|replace({'[block:' : '', ']' : ''}) }}" name="spellbook_3_level_spells" />    
                    </div>
                    <div class="col-12 col-md-4 mb-3">
                        <input placeholder="4-Level" class="form-control" type="text" value="{{ variables.spellbook_4_level_spells is defined ? variables.spellbook_4_level_spells|replace({'[block:' : '', ']' : ''}) }}" name="spellbook_4_level_spells" /> 
                    </div>
                    <div class="col-12 col-md-4 mb-3">
                        <input placeholder="5-level" class="form-control" type="text" value="{{ variables.spellbook_5_level_spells is defined ? variables.spellbook_5_level_spells|replace({'[block:' : '', ']' : ''}) }}" name="spellbook_5_level_spells" /> 
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-md-4 mb-3">
                        <input placeholder="6-Level" class="form-control" type="text" value="{{ variables.spellbook_6_level_spells is defined ? variables.spellbook_6_level_spells|replace({'[block:' : '', ']' : ''}) }}" name="spellbook_6_level_spells" />    
                    </div>
                    <div class="col-12 col-md-4 mb-3">
                        <input placeholder="7-Level" class="form-control" type="text" value="{{ variables.spellbook_7_level_spells is defined ? variables.spellbook_7_level_spells|replace({'[block:' : '', ']' : ''}) }}" name="spellbook_7_level_spells" /> 
                    </div>
                    <div class="col-12 col-md-4 mb-3">
                        <input placeholder="8-level" class="form-control" type="text" value="{{ variables.spellbook_8_level_spells is defined ? variables.spellbook_8_level_spells|replace({'[block:' : '', ']' : ''}) }}" name="spellbook_8_level_spells" /> 
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-md-4 mb-3 offset-md-4">
                        <input placeholder="9-Level" class="form-control" type="text" value="{{ variables.spellbook_9_level_spells is defined ? variables.spellbook_9_level_spells|replace({'[block:' : '', ']' : ''}) }}" name="spellbook_9_level_spells" />    
                    </div>
                </div>
            </div>
        </div>
    </div>
    <hr>
    <div class="row footer-row" id="dnd5e-footer">
        <div class="col-12 col-md-12">
            <h3>Fields for optional features/rules.</h3>
            <p class="c dnd5e-sheet-description m-t-10 mt-1">
               Everything in this section is optional. If you play by default 5e rules, scroll down to the Spellbook (if your classes have any spells).
            </p>
        </div>
        <div class="col-12 col-md-6">
            <div class="form-group">
                <input value="1" {% if variables.prof_dice_enabled is defined and variables.prof_dice_enabled == 1 %} checked="checked"{% endif %} id="prof_dice_enabled" name="prof_dice_enabled" placeholder="" type="checkbox" /> <label for="prof_dice_enabled">Use Proficiency Dice instead of Bonus (see DMG p263)</label>
            </div>
            <div class="form-group">
                <input value="1" {% if variables.hero_points_enabled is defined and variables.hero_points_enabled == 1 %} checked="checked"{% endif %} id="hero_points_enabled" name="hero_points_enabled" placeholder="" type="checkbox" /> <label for="hero_points_enabled">Track Hero Points (see DMG p264)</label><br>
                <label for="hero_points">Hero Points (curr)</label>
                <input class="form-control" type="number" value="{{variables.hero_points is defined ? variables.hero_points}}" name="hero_points" />
            </div>  
            <div class="form-group">
                <input value="1" {% if variables.plot_points_enabled is defined and variables.plot_points_enabled == 1 %} checked="checked"{% endif %} id="plot_points_enabled" name="plot_points_enabled" placeholder="" type="checkbox" /> <label for="hero_points_enabled">Track Plot Points (see DMG p269)</label><br>
                <label for="plot_points">Plot Points (curr)</label>
                <input class="form-control" type="number" value="{{variables.plot_points is defined ? variables.plot_points}}" name="plot_points" />
            </div>  
            <div class="form-group">
                <input value="1" {% if variables.initiative_score is defined and variables.initiative_score == 1 %} checked="checked"{% endif %} id="initiative_score" name="initiative_score" placeholder="" type="checkbox" /> <label for="initiative_score">Use fixed Initiative Score instead of<br>Roll plus Dex Bonus (see DMG p270)</label>
            </div>
        </div>
        <div class="col-12 col-md-6">
            <div class="form-group">
                <label for="spell_points_curr">Spellpoints (curr)</label>
                <input class="form-control" type="number" value="{{variables.spell_points_curr is defined ? variables.spell_points_curr}}" name="spell_points_curr" />
            </div>  
            <div class="form-group">
                <label for="spell_points_max">Spellpoints (max)</label>
                <input class="form-control" type="number" value="{{variables.spell_points_max is defined ? variables.spell_points_max}}" name="spell_points_max"/>
            </div>  
        </div>
    </div>
    <div class="row footer-row" id="dnd5e-footer">
        <div class="col-12">
        Define your own sections here, eg for custom/homebrew content:
        </div>
        <div class="col-12 col-md-6 col-lg-6">
            <div class="dnd-sheet-container">
                <div class="form-group">
                    <label for="title1">Title of the box: </label>
                    <input class="form-control" type="text" value="{{variables.title1 is defined ? variables.title1}}" name="title1"/>
                    <label for="custom1">Content: </label>
                    <textarea  name="custom1" class="form-control" rows="3">{{ variables.custom1 is defined ? variables.custom1 }}</textarea>
                </div>
            </div>
        </div>
        <div class="col-12 col-md-6 col-lg-6">
            <div class="dnd-sheet-container">
                <div class="form-group">
                    <label for="title2">Title of the box: </label>
                    <input class="form-control" type="text" value="{{variables.title2 is defined ? variables.title2}}" name="title2"/>
                    <label for="custom2">Content: </label>
                    <textarea  name="custom2" class="form-control" rows="3">{{ variables.custom2 is defined ? variables.custom2 }}</textarea>
                </div>
            </div>
        </div>
	</div>			
	<div class="contentContainer contentContainer-standard of">
        <h2>Spellbook <small class="text-muted">(Known spells)</small></h2>
        <p class="dnd5e-sheet-description m-t-10 mt-1">
            If you want to see all the spells on your character sheet and use die rolls for them, enter all those spells here.<br>
            <a target="_blank" href="{{ path('rpg_system',{'reference':'dnd5e'}) }}?template=3000">Open the DnD 5e List of Spells</a> and copy the IDs you want, or <a target="_blank" href="{{ path('heroes_sheet_list')}}">create a new statblock</a>
        </p>
        <ul class="dnd5e-sheet-description">
            <li>The character sheets will only show the spells you have marked as 'prepared' and for the levels you have spell slots for, other spells are hidden.</li>
            <li>If you add a spell block id into the ID field, the name of the spell will become a link to the stat block.</li>
            <li>If you are multi-classing, you can change the attribute for each spell accordingly.</li>
            <li>If you have a damage or healing spell that scale up to higher levels then just put the 'on higher levels' damage/heal output into the 'DMG/lvl' field and the spell will show up for all higher levels, no need to add it manually several times.</li>
        </ul>
        <div class="row footer-row" id="dnd5e-footer">
            <div class="col-12 col-xs-12" id="dnd5e-spells">
                <!-- Spells -->
                <div class="dnd-sheet-container">
                    <div class="form-group of">
                        <table width="100%" class="attacktable" id="spelltable">
                            <tr>
                                <th title="Spell is prepared" class="w30 c">P</th>
                                <th title="(C)antrip or level of the spell (1-9)" class="w60 c">LVL</th>
                                <th title="Name of the spell" width="15%">NAME</th>
                                <th title="WA stat block ID of the spell" class="w90 c">ID</th>
                                <th title="Spellcasting ability" class="w90 c">ATTR</th>
                                <th title="Casting time" class="c">CT</th>
                                <th title="Range of the spell (touch, 6ft, ...)" class="c">RNG</th>
                                <th title="Duration of the spell" class="c">DUR</th>
                                <th title="Damage or healing power (rollable)" class="w90 c">DMG</th>
                                <th title="Check to add spellcasting modifier to damage/heal output" class="w30 c">+SCM</th>
                                <th title="Damage or healing power on higher levels (rollable)" class="w90 c">DMG/lvl</th>
                                <th title="Required components: (v)erbal, (s)omatic, (m)aterial" class="w90 c">CMP</th>
                                <th title="Components for how many casts you have available" class="w60 c">#</th>
                            </tr>
                            {% for i in 1..60 %}{% set id = i %}{% if id < 10 %}{% set id = '0' ~ id %}{% endif %}
                            {% if variables is defined and variables != '' %}
                                {{ sheet.spell( id,
                                attribute(variables, "spell_level_" ~ id)|default(''),
                                attribute(variables, "spell_name_" ~ id)|default(''),
                                attribute(variables, "spell_id_" ~ id)|default(''),
                                attribute(variables, "spell_ability_" ~ id)|default(''),
                                attribute(variables, "spell_prepared_" ~ id)|default(''),
                                attribute(variables, "spell_casting_time_" ~ id)|default(''),
                                attribute(variables, "spell_range_" ~ id)|default(''),
                                attribute(variables, "spell_duration_" ~ id)|default(''),
                                attribute(variables, "spell_damage_" ~ id)|default(''),
                                attribute(variables, "spell_damage_scm_" ~ id)|default(''),
                                attribute(variables, "spell_damage_higher_" ~ id)|default(''),
                                attribute(variables, "spell_components_" ~ id)|default(''),
                                attribute(variables, "spell_component_sets_" ~ id)|default(''),
                                attribute(variables, "spell_notes_" ~ id)|default('')
                            ) }}
                            {% else %} {{ sheet.spell( id, "", "", "", "", "", "", "", "", "", "", "", "", "", "" ) }} {% endif %}
                            {% endfor %}
                        </table>
                    </div>                  
                </div>
            </div>
        </div>
    </div>
</div>
<!--
    Values that are stored and tracked but not visible on the sheet. 
    These are mostly used for the tracking sheet which tracks temporary changes on the character during the session.
-->
<input type="hidden" value="{{ variables.temporary_hit_points is defined ? variables.temporary_hit_points }}" name="temporary_hit_points" />
<input type="hidden" value="{{ variables.temporary_hit_points_current is defined ? variables.temporary_hit_points_current }}" name="temporary_hit_points_current" />
<input type="hidden" value="{{ variables.hit_dice_remaining is defined ? variables.hit_dice_remaining }}" name="hit_dice_remaining" />
<input type="hidden" value="{{ variables.hit_dice_remaining_2 is defined ? variables.hit_dice_remaining_2 }}" name="hit_dice_remaining_2" />
<input type="hidden" value="{{ variables.hit_dice_remaining_3 is defined ? variables.hit_dice_remaining_3 }}" name="hit_dice_remaining_3" />
<input type="hidden" value="{{ variables.hit_dice_remaining_4 is defined ? variables.hit_dice_remaining_4 }}" name="hit_dice_remaining_4" />
<input type="hidden" value="{{ variables.conditions is defined ? variables.conditions }}" name="conditions" />
<input type="hidden" value="{{ variables.inspiration is defined ? variables.inspiration }}" name="inspiration" />
<input type="hidden" value="{{ variables.available_1st_level_spellslots is defined ? variables.available_1st_level_spellslots }}" name="available_1st_level_spellslots" />
<input type="hidden" value="{{ variables.available_2nd_level_spellslots is defined ? variables.available_2nd_level_spellslots }}" name="available_2nd_level_spellslots" />
<input type="hidden" value="{{ variables.available_3rd_level_spellslots is defined ? variables.available_3rd_level_spellslots }}" name="available_3rd_level_spellslots" />
<input type="hidden" value="{{ variables.available_4th_level_spellslots is defined ? variables.available_4th_level_spellslots }}" name="available_4th_level_spellslots" />
<input type="hidden" value="{{ variables.available_5th_level_spellslots is defined ? variables.available_5th_level_spellslots }}" name="available_5th_level_spellslots" />
<input type="hidden" value="{{ variables.available_6th_level_spellslots is defined ? variables.available_6th_level_spellslots }}" name="available_6th_level_spellslots" />
<input type="hidden" value="{{ variables.available_7th_level_spellslots is defined ? variables.available_7th_level_spellslots }}" name="available_7th_level_spellslots" />
<input type="hidden" value="{{ variables.available_8th_level_spellslots is defined ? variables.available_8th_level_spellslots }}" name="available_8th_level_spellslots" />
<input type="hidden" value="{{ variables.available_9th_level_spellslots is defined ? variables.available_9th_level_spellslots }}" name="available_9th_level_spellslots" />